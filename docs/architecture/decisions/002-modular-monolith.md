# ADR 2: 모듈형 모놀리스 아키텍처 채택

## 상태
승인됨 (2024-03-23)
이전 상태: 마이크로서비스 아키텍처 (2024-03-15)

## 컨텍스트
- 초기 개발 단계에서 운영 복잡도를 낮출 필요가 있음
- 빠른 개발과 배포가 필요함
- 모듈 간 강한 결합이 예상됨
- 단일 팀에서 관리 가능한 규모임

## 결정
모듈형 모놀리스 아키텍처를 채택하여 시스템을 구성하기로 결정

### 주요 모듈
1. 사용자 모듈
   - 사용자 관리
   - 인증/인가
   - 프로필 관리

2. TimeMachine 모듈
   - 시간 관리
   - 테스트 시간 제어
   - 시간 동기화

3. AccessCode 모듈
   - 접근 코드 관리
   - 이메일 발송
   - GDPR 준수

### 모듈 구조
```
src/
├── modules/
│   ├── user/
│   ├── time-machine/
│   └── access-code/
├── shared/
│   ├── utils/
│   ├── config/
│   └── types/
└── core/
    ├── database/
    ├── cache/
    └── email/
```

### 통신 방식
- 모듈 간 직접 메서드 호출
- 이벤트 이미터를 통한 내부 이벤트
- 공유 상태 관리

## 결과
### 긍정적
- 개발 및 배포 단순화
- 단일 코드베이스 관리
- 빠른 개발 속도
- 디버깅 용이성
- 트랜잭션 관리 단순화

### 부정적
- 수평적 확장의 제한
- 모듈 간 결합도 증가
- 배포 단위의 비유연성
- 기술 스택 제약

## 대안
1. 마이크로서비스 아키텍처
2. 서버리스 아키텍처
3. 레이어드 모놀리스

## 관련 결정
- ADR 1: NX 모노레포 도입
- ADR 3: TypeScript 사용
- ADR 5: NestJS 프레임워크 사용

## 변경 이력
| 날짜 | 변경 내용 | 작성자 |
|------|-----------|--------|
| 2024-03-23 | 모듈형 모놀리스로 변경 | System Team |
| 2024-03-15 | 최초 작성 (마이크로서비스) | System Team | 